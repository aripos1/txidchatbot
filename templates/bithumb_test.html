<!DOCTYPE html>
<html lang="ko">
<head>
    <title>ë¹—ì¸ API í…ŒìŠ¤íŠ¸</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    {% include "nav.html" %}
    <style>
        :root {
            --primary-color: #4a90e2;
            --primary-hover: #357ABD;
            --secondary-color: #f0f2f5;
            --accent-color: #5bc0de;
            --text-primary: #34495e;
            --text-secondary: #7f8c8d;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --error-color: #e74c3c;
            --card-bg: #ffffff;
            --card-border: #e0e6ed;
            --input-border: #dcdfe6;
            --input-focus: #a8d5ff;
            --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.12);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: var(--secondary-color);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding: 1.5rem;
            padding-top: 80px;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2.5rem;
            background-color: var(--card-bg);
            border-radius: 1.25rem;
            box-shadow: var(--shadow-lg);
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--primary-color);
            margin-bottom: 0.75rem;
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.15rem;
            max-width: 650px;
            margin: 0 auto;
        }

        .test-section {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: var(--shadow-sm);
            margin-bottom: 2rem;
        }

        .test-section h2 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--primary-color);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .form-group input[type="text"],
        .form-group input[type="password"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid var(--input-border);
            border-radius: 0.5rem;
            background-color: var(--secondary-color);
            color: var(--text-primary);
            transition: all 0.3s ease;
        }

        .form-group input[type="text"]:focus,
        .form-group input[type="password"]:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px var(--input-focus);
            background-color: var(--card-bg);
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .button {
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            color: white;
            background-color: var(--primary-color);
            border: none;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .button:hover {
            background-color: var(--primary-hover);
            transform: translateY(-1px);
        }

        .button.secondary {
            background-color: var(--secondary-color);
            color: var(--text-primary);
        }

        .button.secondary:hover {
            background-color: #e4e6e9;
        }

        .result-area {
            margin-top: 2rem;
            padding: 1.5rem;
            background-color: var(--secondary-color);
            border-radius: 0.75rem;
            border: 1px solid var(--card-border);
        }

        .result-area pre {
            background-color: var(--card-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.4rem 0.8rem;
            border-radius: 1rem;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1rem;
        }

        .status-success {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--success-color);
        }

        .status-error {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--error-color);
        }

        .status-warning {
            background-color: rgba(243, 156, 18, 0.1);
            color: var(--warning-color);
        }

        .copy-button {
            padding: 0.4rem 0.8rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.35rem;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-left: 0.5rem;
        }

        .copy-button:hover {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .copy-button.copied {
            background-color: var(--success-color);
            color: white;
            border-color: var(--success-color);
        }

        @media (max-width: 768px) {
            body {
                padding: 1rem;
                padding-top: 90px;
            }
            .container {
                padding: 1.5rem;
            }
            .header h1 {
                font-size: 2rem;
            }
            .header p {
                font-size: 1rem;
            }
            .button-group {
                flex-direction: column;
            }
            .button {
                width: 100%;
                font-size: 0.95rem;
            }
            .card-section {
                padding: 1rem;
            }
            .card-section h3 {
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 0.75rem;
                padding-top: 100px;
            }
            .container {
                padding: 1rem;
            }
            .header h1 {
                font-size: 1.5rem;
            }
            .header p {
                font-size: 0.9rem;
            }
            .card-section {
                padding: 0.8rem;
                margin-bottom: 1rem;
            }
            .card-section h3 {
                font-size: 0.95rem;
            }
            .button {
                font-size: 0.85rem;
                padding: 0.7rem 1rem;
            }
            .result-area pre {
                font-size: 0.85rem;
                padding: 0.8rem;
            }
        }

        .card-section {
            background: var(--card-bg);
            border-radius: 1rem;
            box-shadow: var(--shadow-sm);
            padding: 1.5rem 2rem;
            margin-bottom: 1.5rem;
        }
        .card-section h3 {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        .result-area pre {
            background: #23272e;
            color: #e0e6ed;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: 'Fira Mono', 'Consolas', monospace;
            font-size: 0.95rem;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container" x-data="bithumbTest()">
        <div class="header">
            <h1>ë¹—ì¸ API í…ŒìŠ¤íŠ¸</h1>
            <p>ë¹—ì¸ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
            <div style="margin-top: 15px;">
                <a href="/bithumb-guide" 
                   style="background: #16a085; color: white; padding: 10px 20px; text-decoration: none; border-radius: 6px; font-size: 14px; display: inline-block; font-weight: 500;">
                    ğŸ“š ê°€ìƒ ìì‚° ì¶œê¸ˆ ê°€ì´ë“œ
                </a>
            </div>
        </div>

        <div class="card-section">
            <div class="form-group">
                <label for="api-version">API ë²„ì „</label>
                <select id="api-version" x-model="apiVersion" @change="updateApiList">
                    <option value="v1">v1 (êµ¬ë²„ì „)</option>
                    <option value="v2">v2 (ì‹ ë²„ì „)</option>
                </select>
            </div>
            <div class="form-group">
                <label for="api-category">ì¹´í…Œê³ ë¦¬</label>
                <select id="api-category" x-model="apiCategory" @change="updateApiList">
                    <option value="info" x-show="apiVersion==='v1'">INFO</option>
                    <option value="trade" x-show="apiVersion==='v1'">TRADE</option>
                    <option value="private" x-show="apiVersion==='v2'">PRIVATE</option>
                </select>
            </div>
            <div class="form-group">
                <label for="api-name">API ëª…ì¹­</label>
                <select id="api-name" x-model="selectedApi" @change="updateApiInfo">
                    <template x-for="api in apiList" :key="api.value">
                        <option :value="api.value" x-text="api.label"></option>
                    </template>
                </select>
            </div>
        </div>

        <div class="card-section">
            <h3>API ì¸ì¦ ì •ë³´</h3>
            <div style="padding: 1rem; background-color: #f8f9fa; border-radius: 0.5rem; border-left: 4px solid #28a745;">
                <h4 style="margin: 0 0 0.5rem 0; color: #28a745;">ğŸ” API Key ì„¤ì • ë°©ë²•</h4>
                
                <div style="margin-bottom: 1rem;">
                    <strong>ë°©ë²• 1: ì½”ë“œì— ì§ì ‘ ì„¤ì • (ê³µì‹ ì˜ˆì‹œ ë°©ì‹)</strong>
                    <div style="background-color: #e9ecef; padding: 0.75rem; border-radius: 0.25rem; font-family: monospace; font-size: 0.85rem; margin-top: 0.5rem;">
                        <div># main.py íŒŒì¼ì—ì„œ ìˆ˜ì •</div>
                        <div>accessKey = "ì‹¤ì œ_ë°œê¸‰ë°›ì€_API_KEY"</div>
                        <div>secretKey = "ì‹¤ì œ_ë°œê¸‰ë°›ì€_SECRET_KEY"</div>
                    </div>
                </div>
                
                <div>
                    <strong>ë°©ë²• 2: í™˜ê²½ë³€ìˆ˜ ì„¤ì • (ë³´ì•ˆ ë°©ì‹)</strong>
                    <div style="background-color: #e9ecef; padding: 0.75rem; border-radius: 0.25rem; font-family: monospace; font-size: 0.85rem; margin-top: 0.5rem;">
                        <div># .env íŒŒì¼ì— ì¶”ê°€</div>
                        <div>BITHUMB_API_KEY=ì‹¤ì œ_ë°œê¸‰ë°›ì€_API_KEY</div>
                        <div>BITHUMB_SECRET_KEY=ì‹¤ì œ_ë°œê¸‰ë°›ì€_SECRET_KEY</div>
                    </div>
                </div>
                
                <small style="color: #666; margin-top: 0.5rem; display: block;">
                    ğŸ’¡ ë°©ë²• 1ì´ ìš°ì„  ì ìš©ë˜ë©°, ì„¤ì •ë˜ì§€ ì•Šìœ¼ë©´ ë°©ë²• 2ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤<br>
                    ğŸ”— ë¹—ì¸ ì›¹ì‚¬ì´íŠ¸ â†’ ë§ˆì´í˜ì´ì§€ â†’ API ê´€ë¦¬ì—ì„œ í‚¤ë¥¼ ë°œê¸‰ë°›ìœ¼ì„¸ìš”
                </small>
            </div>
        </div>

        <div class="button-group">
            <button class="button" @click="testApi">API í…ŒìŠ¤íŠ¸</button>
            <button class="button secondary" @click="clearResult">ê²°ê³¼ ì§€ìš°ê¸°</button>
        </div>

        <div class="result-area" x-show="result">
            <div :class="['status-badge', statusClass]" x-text="statusText"></div>
            <div class="result-content">
                <div class="result-header">
                    <strong>ìš”ì²­ URL:</strong>
                    <button class="copy-button" @click="copyToClipboard(requestUrl)">URL ë³µì‚¬</button>
                </div>
                <pre x-text="requestUrl"></pre>

                <div class="result-header" style="margin-top: 1rem;">
                    <strong>ìš”ì²­ í—¤ë”:</strong>
                    <button class="copy-button" @click="copyToClipboard(requestHeaders)">í—¤ë” ë³µì‚¬</button>
                </div>
                <pre x-text="requestHeaders"></pre>

                <div class="result-header" style="margin-top: 1rem;">
                    <strong>ìš”ì²­ ë°”ë””:</strong>
                    <button class="copy-button" @click="copyToClipboard(resultBody)">ë°”ë”” ë³µì‚¬</button>
                </div>
                <pre x-text="resultBody"></pre>

                <div class="result-header" style="margin-top: 1rem;">
                    <strong>ì‘ë‹µ ê²°ê³¼:</strong>
                    <button class="copy-button" @click="copyToClipboard(result)">ê²°ê³¼ ë³µì‚¬</button>
                </div>
                <pre x-text="result"></pre>
            </div>
        </div>
    </div>

    <script>
        function bithumbTest() {
            return {
                apiVersion: 'v1',
                apiCategory: 'info',
                selectedApi: '',
                apiList: [],
                selectedEndpoint: '',
                contentType: 'application/json',
                params: '{}',
                showParams: true,
                result: null,
                requestUrl: '',
                requestHeaders: '',
                status: 'idle',
                method: 'POST',
                resultBody: '',

                apiOptions: {
                    v1: {
                        info: [
                            { value: 'account', label: 'íšŒì› ì •ë³´ ì¡°íšŒ', endpoint: 'info/account', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'balance', label: 'ë³´ìœ ìì‚° ì¡°íšŒ', endpoint: 'info/balance', method: 'POST', params: '{"currency": "BTC"}' },
                            { value: 'wallet_address', label: 'ì…ê¸ˆì§€ê°‘ ì£¼ì†Œ ì¡°íšŒ', endpoint: 'info/wallet_address', method: 'POST', params: '{"currency": "BTC"}' },
                            { value: 'transaction_history', label: 'ìµœê·¼ ê±°ë˜ì •ë³´ ì¡°íšŒ', endpoint: 'info/transaction_history', method: 'POST', params: '{"count": 10, "order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'orders', label: 'ê±°ë˜ ì£¼ë¬¸ë‚´ì—­ ì¡°íšŒ', endpoint: 'info/orders', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "count": 10}' },
                            { value: 'order_detail', label: 'ê±°ë˜ ì£¼ë¬¸ë‚´ì—­ ìƒì„¸ ì¡°íšŒ', endpoint: 'info/order_detail', method: 'POST', params: '{"order_id": "1234567890", "order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'user_transactions', label: 'ê±°ë˜ ì²´ê²°ë‚´ì—­ ì¡°íšŒ', endpoint: 'info/user_transactions', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "count": 10}' }
                        ],
                        trade: [
                            { value: 'place', label: 'ì§€ì •ê°€ ì£¼ë¬¸í•˜ê¸°', endpoint: 'trade/place', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001", "price": "50000000", "type": "bid"}' },
                            { value: 'market_buy', label: 'ì‹œì¥ê°€ ë§¤ìˆ˜í•˜ê¸°', endpoint: 'trade/market_buy', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001"}' },
                            { value: 'market_sell', label: 'ì‹œì¥ê°€ ë§¤ë„í•˜ê¸°', endpoint: 'trade/market_sell', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001"}' },
                            { value: 'auto', label: 'ìë™ ì£¼ë¬¸í•˜ê¸°', endpoint: 'trade/auto', method: 'POST', params: '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001", "price": "50000000", "type": "bid"}' },
                            { value: 'cancel', label: 'ì£¼ë¬¸ ì·¨ì†Œí•˜ê¸°', endpoint: 'trade/cancel', method: 'POST', params: '{"order_id": "1234567890", "type": "bid", "order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'btc_withdrawal', label: 'ì½”ì¸ ì¶œê¸ˆí•˜ê¸°(ê°œì¸)', endpoint: 'trade/btc_withdrawal', method: 'POST', params: '{"currency": "BTC", "units": "0.01", "address": "ì…ë ¥ì£¼ì†Œ", "destination": "", "fee": "0.001"}' },
                            { value: 'corp_withdrawal', label: 'ì½”ì¸ ì¶œê¸ˆí•˜ê¸°(ë²•ì¸)', endpoint: 'trade/corp_withdrawal', method: 'POST', params: '{"currency": "BTC", "units": "0.01", "address": "ì…ë ¥ì£¼ì†Œ", "destination": "", "fee": "0.001"}' }
                        ]
                    },
                    v2: {
                        private: [
                            { value: 'accounts', label: 'ì „ì²´ ê³„ì¢Œ ì¡°íšŒ', endpoint: 'v1/accounts', method: 'GET', params: '{}' },
                            { value: 'order_info', label: 'ì£¼ë¬¸ ê°€ëŠ¥ ì •ë³´', endpoint: 'v1/order/info', method: 'GET', params: '{"order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'orders', label: 'ì£¼ë¬¸ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ', endpoint: 'v1/orders', method: 'GET', params: '{"order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'order_detail', label: 'ê°œë³„ ì£¼ë¬¸ ì¡°íšŒ', endpoint: 'v1/order/detail', method: 'GET', params: '{"order_id": "1234567890", "order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'user_transactions', label: 'ì£¼ë¬¸ ì²´ê²°ë‚´ì—­ ì¡°íšŒ', endpoint: 'v1/user/transactions', method: 'GET', params: '{"order_currency": "BTC", "payment_currency": "KRW"}' },
                            { value: 'withdraw_coin', label: 'ê°€ìƒ ìì‚° ì¶œê¸ˆí•˜ê¸°', endpoint: 'v1/withdraws/coin', method: 'POST', params: '{"currency": "USDT", "net_type": "TRX", "amount": 5, "address": "TAMDuTiUQ1jBjj49yUdvopMPC8j1ZKjy66", "exchange_name": "binance", "receiver_type": "personal", "receiver_ko_name": "ì„ í˜„ì„±", "receiver_en_name": "IMHYEONSEONG"}' },
                            { value: 'withdraw_list', label: 'ì½”ì¸ ì¶œê¸ˆ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ', endpoint: 'v1/withdraw/coin/list', method: 'GET', params: '{"currency": "BTC"}' },
                            { value: 'deposit_list', label: 'ì½”ì¸ ì…ê¸ˆ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ', endpoint: 'v1/deposit/coin/list', method: 'GET', params: '{"currency": "BTC"}' },
                            { value: 'wallet_address', label: 'ì…ê¸ˆ ì£¼ì†Œ ì¡°íšŒ', endpoint: 'v1/deposit/coin/address', method: 'GET', params: '{"currency": "BTC"}' }
                        ]
                    }
                },

                updateApiList() {
                    this.apiList = this.apiOptions[this.apiVersion][this.apiCategory];
                    this.selectedApi = this.apiList[0].value;
                    this.updateApiInfo();
                },

                updateApiInfo() {
                    const api = this.apiOptions[this.apiVersion][this.apiCategory].find(a => a.value === this.selectedApi);
                    if (api) {
                        this.selectedEndpoint = api.endpoint;
                        this.method = api.method;
                        this.params = api.params;
                        this.showParams = api.method !== 'GET';
                        this.contentType = api.method === 'POST' ? 'application/json' : 'application/x-www-form-urlencoded';
                        let paramsObj = {};
                        try { paramsObj = JSON.parse(api.params); } catch(e) {}
                        if (api.params && (paramsObj.currency === undefined && paramsObj.order_currency === undefined)) {
                            paramsObj.currency = 'BTC';
                            this.params = JSON.stringify(paramsObj);
                        }
                    }
                },

                get statusClass() {
                    return {
                        'idle': '',
                        'success': 'status-success',
                        'error': 'status-error',
                        'warning': 'status-warning'
                    }[this.status];
                },

                get statusText() {
                    return {
                        'idle': '',
                        'success': 'âœ“ API í˜¸ì¶œ ì„±ê³µ',
                        'error': 'âœ• API í˜¸ì¶œ ì‹¤íŒ¨',
                        'warning': 'âš ï¸ API í˜¸ì¶œ ê²½ê³ '
                    }[this.status];
                },

                updateParams() {
                    const defaultParams = {
                        'v1/market/all': '{}',
                        'v1/accounts': '{}',
                        'v2/accounts': '{}',
                        'v1/order/detail': '{"order_id": "1234567890", "type": "bid", "order_currency": "BTC", "payment_currency": "KRW"}',
                        'v2/order/detail': '{"order_id": "1234567890", "type": "bid", "order_currency": "BTC", "payment_currency": "KRW"}',
                        'v1/orders': '{"order_currency": "BTC", "payment_currency": "KRW", "count": 20}',
                        'v2/orders': '{"order_currency": "BTC", "payment_currency": "KRW", "count": 20}',
                        'v1/order/cancel': '{"order_id": "1234567890", "type": "bid", "order_currency": "BTC", "payment_currency": "KRW"}',
                        'v2/order/cancel': '{"order_id": "1234567890", "type": "bid", "order_currency": "BTC", "payment_currency": "KRW"}',
                        'v1/order/place': '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001", "price": "50000000", "type": "bid"}',
                        'v2/order/place': '{"order_currency": "BTC", "payment_currency": "KRW", "units": "0.001", "price": "50000000", "type": "bid"}',
                        'no_version/accounts': '{}'
                    };
                    this.params = defaultParams[this.selectedEndpoint] || '{}';
                    this.showParams = !['v1/market/all', 'v1/accounts', 'v2/accounts', 'no_version/accounts'].includes(this.selectedEndpoint);
                },

                async testApi() {
                    if (!this.selectedEndpoint) {
                        alert('API ëª…ì¹­ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.');
                        return;
                    }
                    // í™˜ê²½ë³€ìˆ˜ì—ì„œ API Keyë¥¼ ë¶ˆëŸ¬ì˜¤ë¯€ë¡œ ë³„ë„ ê²€ì¦ ë¶ˆí•„ìš”
                    let paramsObj = {};
                    try { paramsObj = JSON.parse(this.params); } catch(e) {}
                    // v2 APIì˜ accountsëŠ” íŒŒë¼ë¯¸í„° ë¶ˆí•„ìš”
                    if (this.apiVersion === 'v2' && this.selectedApi === 'accounts') {
                        // ê³„ì¢Œ ì¡°íšŒëŠ” íŒŒë¼ë¯¸í„° ì™„ì „íˆ ë¹„ì›Œì•¼ í•¨
                        paramsObj = {};
                    } else if (this.apiVersion === 'v2' && this.selectedApi === 'withdraw_coin') {
                        // ì¶œê¸ˆ API í•„ìˆ˜ íŒŒë¼ë¯¸í„° ê²€ì¦
                        if (!paramsObj.currency || !paramsObj.amount || !paramsObj.address) {
                            alert('ì¶œê¸ˆì— í•„ìš”í•œ í•„ìˆ˜ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\n- currency: ì¶œê¸ˆí•  ì½”ì¸\n- amount: ì¶œê¸ˆ ìˆ˜ëŸ‰\n- address: ì¶œê¸ˆ ì£¼ì†Œ');
                            return;
                        }
                    } else if (!paramsObj.currency && !paramsObj.order_currency) {
                        alert('í•„ìˆ˜ ìì‚° ì½”ë“œ(currency ë˜ëŠ” order_currency)ê°€ ì…ë ¥ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                        return;
                    }
                    // currencyëŠ” ë¹—ì¸ APIì—ì„œ ì •í™•í•œ ëŒ€ì†Œë¬¸ìë¥¼ ìš”êµ¬í•˜ë¯€ë¡œ ë³€í™˜í•˜ì§€ ì•ŠìŒ
                    // if (paramsObj.currency) {
                    //     paramsObj.currency = paramsObj.currency.toLowerCase();
                    // }
                    try {
                        let fetchOptions = {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({
                                selectedEndpoint: this.selectedEndpoint,
                                params: paramsObj,
                                apiVersion: this.apiVersion,
                                apiCategory: this.apiCategory,
                                selectedApi: this.selectedApi,
                                contentType: this.contentType,
                                method: this.method
                            })
                        };
                        const response = await fetch('/api/bithumb/test', fetchOptions);
                        const data = await response.json();
                        this.requestUrl = data.requestUrl || '';
                        this.requestHeaders = JSON.stringify(data.requestHeaders || {}, null, 2);
                        this.resultBody = data.requestBody || '';
                        if (data.result && data.result.error) {
                            this.result = JSON.stringify(data.result, null, 2);
                        } else {
                            this.result = JSON.stringify(data.result || {}, null, 2);
                        }
                        this.status = data.success ? 'success' : 'error';
                    } catch (error) {
                        this.result = JSON.stringify({ error: error.message }, null, 2);
                        this.status = 'error';
                    }
                },

                clearResult() {
                    this.result = null;
                    this.requestUrl = '';
                    this.requestHeaders = '';
                    this.status = 'idle';
                },

                async copyToClipboard(text) {
                    try {
                        await navigator.clipboard.writeText(text);
                        const button = event.target;
                        button.classList.add('copied');
                        setTimeout(() => {
                            button.classList.remove('copied');
                        }, 2000);
                    } catch (err) {
                        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
                        alert('í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                    }
                }
            };
        }
    </script>
</body>
</html> 